<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>@target Your CSS | Snugug</title><link rel="icon" href="/images/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="google-site-verification" content="zIeV2B7zZKCtEFP-6vV8rKk0ocpbp035v_g3IRn12Jo"><script src="/js/main.js" defer="defer"></script><style type="text/css">article,body,div,h1,header,html,main{background:0 0;border:0;font-size:100%;margin:0;outline:0;padding:0;vertical-align:baseline}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{line-height:1}article,header,main{display:block}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}:root{font-size:125%;font-family:aller,'Lucida Grande','Lucida Sans Unicode','Lucida Sans',Geneva,Verdana,sans-serif}body{background:#f8f7f2;color:#2c2a21;text-rendering:optimizeLegibility;-webkit-font-feature-settings:"liga","dlig";-ms-font-feature-settings:"liga","dlig";-o-font-feature-settings:"liga","dlig";font-feature-settings:"liga","dlig";font-weight:400}body *+*{margin-top:1rem}.article--heading{width:100vw;padding:2rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;z-index:-1}.article--heading{background-color:#c20030;background:linear-gradient(0deg,rgba(194,0,48,0) 10%,rgba(194,0,48,.05) 10%,rgba(194,0,48,.05) 20%,rgba(194,0,48,.1) 20%,rgba(194,0,48,.1) 30%,rgba(194,0,48,.15) 30%,rgba(194,0,48,.15) 40%,rgba(194,0,48,.2) 40%,rgba(194,0,48,.2) 50%,rgba(194,0,48,.3) 50%,rgba(194,0,48,.3) 60%,rgba(194,0,48,.4) 60%,rgba(194,0,48,.4) 70%,rgba(194,0,48,.5) 70%,rgba(194,0,48,.5) 80%,rgba(194,0,48,.6) 80%,rgba(194,0,48,.6) 90%,rgba(194,0,48,.8) 90%),linear-gradient(-90deg,rgba(194,0,48,0) 10%,rgba(194,0,48,.05) 10%,rgba(194,0,48,.05) 20%,rgba(194,0,48,.1) 20%,rgba(194,0,48,.1) 30%,rgba(194,0,48,.15) 30%,rgba(194,0,48,.15) 40%,rgba(194,0,48,.2) 40%,rgba(194,0,48,.2) 50%,rgba(194,0,48,.3) 50%,rgba(194,0,48,.3) 60%,rgba(194,0,48,.4) 60%,rgba(194,0,48,.4) 70%,rgba(194,0,48,.5) 70%,rgba(194,0,48,.5) 80%,rgba(194,0,48,.6) 80%,rgba(194,0,48,.6) 90%,rgba(194,0,48,.8) 90%),#da9400;min-height:100vh}.article--title{text-shadow:0 -.005em #111,-.005em 0 #282727,-.005em -.01em #111,-.01em -.005em #282727,-.01em -.015em #111,-.015em -.01em #282727,-.015em -.02em #111,-.02em -.015em #282727,-.02em -.025em #111,-.025em -.02em #282727,-.025em -.03em #111,-.03em -.025em #282727,-.03em -.035em #111,-.035em -.03em #282727,-.035em -.04em #111,-.04em -.035em #282727,-.04em -.045em #111,-.045em -.04em #282727,-.045em -.05em #111,-.05em -.045em #282727,-.05em -.055em #111,-.055em -.05em #282727,-.055em -.06em #111,-.06em -.055em #282727,-.06em -.065em #111,-.065em -.06em #282727,-.065em -.07em #111,-.07em -.065em #282727,-.07em -.075em #111,-.075em -.07em #282727;-webkit-font-feature-settings:"liga","dlig";-ms-font-feature-settings:"liga","dlig";-o-font-feature-settings:"liga","dlig";font-feature-settings:"liga","dlig";color:#f8f7f2;font-size:2rem;font-weight:700;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;line-height:1.2;margin-right:0;margin:0 auto;max-width:100%;text-align:right;text-rendering:optimizeLegibility;word-wrap:break-word}@media (min-width:860px){.article--title{font-size:6vw;margin-right:calc(10% - 2rem);max-width:80%}}._blog{margin-top:0}@supports (display:flex){._blog{display:-ms-flexbox;display:flex;min-height:100vh;-ms-flex-direction:column;flex-direction:column}}@supports (display:flex){._blog--article{-ms-flex:1;flex:1}}</style><link rel="preload" href="/css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="/css/style.css"></noscript><script>!function(u){"use strict";var e=function(e,t,n){var r,o=u.document,a=o.createElement("link");if(t)r=t;else{var l=(o.body||o.getElementsByTagName("head")[0]).childNodes;r=l[l.length-1]}var i=o.styleSheets;a.rel="stylesheet",a.href=e,a.media="only x",function e(t){if(o.body)return t();setTimeout(function(){e(t)})}(function(){r.parentNode.insertBefore(a,t?r:r.nextSibling)});var d=function(e){for(var t=a.href,n=i.length;n--;)if(i[n].href===t)return e();setTimeout(function(){d(e)})};function s(){a.addEventListener&&a.removeEventListener("load",s),a.media=n||"all"}return a.addEventListener&&a.addEventListener("load",s),(a.onloadcssdefined=d)(s),a};"undefined"!=typeof exports?exports.loadCSS=e:u.loadCSS=e}("undefined"!=typeof global?global:this),function(r){if(r.loadCSS){var e=loadCSS.relpreload={};if(e.support=function(){try{return r.document.createElement("link").relList.supports("preload")}catch(e){return!1}},e.poly=function(){for(var e=r.document.getElementsByTagName("link"),t=0;t<e.length;t++){var n=e[t];"preload"===n.rel&&"style"===n.getAttribute("as")&&(r.loadCSS(n.href,n,n.getAttribute("media")),n.rel=null)}},!e.support()){e.poly();var t=r.setInterval(e.poly,300);r.addEventListener&&r.addEventListener("load",function(){e.poly(),r.clearInterval(t)}),r.attachEvent&&r.attachEvent("onload",function(){r.clearInterval(t)})}}}(this);</script><script id="font-load">(function () {
      'use strict';

      var fontURL = '/css/fonts.css?bust=342918',
          fonts,
          req,
          style,
          fontUrlLS;

      window.domCL = false;

      window.addEventListener('DOMContentLoaded', function () {
        window.domCL = true;
      });

      if (window.localStorage && document.querySelector && window.XMLHttpRequest) {
        fonts = localStorage.getItem('fonts');
        fontUrlLS = localStorage.getItem('fontURL');

        if (fonts && fontUrlLS === fontURL) {
          req = document.querySelector('#font-load');

          style = window.document.createElement('style');
          style.innerHTML = fonts;

          req.parentNode.insertBefore(style, req.nextSibling);
        }
        else {
          window.addEventListener('load', function () {
            req = new XMLHttpRequest();
            req.open('GET', fontURL);
            req.onreadystatechange = function () {
              localStorage.setItem('fonts', req.responseText);
              localStorage.setItem('fontURL', fontURL);
            }
            req.send();
          });
        }
      }
    })();</script></head><body><div class="_blog"><main class="_blog--article" itemscope="" itemtype="http://schema.org/Blog"><article class="article"><header class="article--heading"><h1 class="article--title" itemprop="name">@target Your CSS</h1></header><div class="article--content base" itemprop="text"><p>Way back on January 5, 2012, a feature was made to the Sass issue queue titled <a href="https://github.com/sass/sass/issues/241">separate media/browser specific markup to separate style sheet</a>. The gist of the issue is fairly simple in concept, it's very useful to be able to maintain styling in a single Sass file (or really, single output CSS file), but be able to spin out the pieces you'd like to enhance/degrade with into their own CSS files automatically. Think writing styling for browsers that support Flexbox and browsers that don't support Flexbox in the same file, but having two separate CSS files output for the two different levels of support, letting you use something like <a href="http://yepnopejs.com/">yepnope</a> or <a href="https://github.com/filamentgroup/loadCSS">loadCSS</a> to load in only the styling needed. It would make <a href="https://github.com/sass/sass/issues/241#issuecomment-7881980">graceful degradation</a> for legacy browsers easier too. Lots of good things.</p><p>The general consensus from that thread is that a syntax similar to <code>@target</code> would be great, so you could write Sass that looks like the following:</p><pre class="language-scss"><code class="language-scss"><span class="token selector">.foo </span><span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> bar<span class="token punctuation">;</span>
  <span class="token atrule"><span class="token rule">@target</span> old</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> baz<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>With this syntax proposal, you'd get out the base stylesheet that you wrote (with <code>content: bar</code>) and a file named <code>old.css</code> with <code>content: baz</code>. Fantastic! Except, it hasn't been implemented yet, so we can't quite use it yet.</p><p>But ya know what? I want to use it now. My current <a href="http://pointnorth.io/#partial-structure">best practice of manually doing it</a> makes me sad. I want to do it automatically! I've got a bit task runner crazy recently, and after messing around with some Sass, I've cracked the case and have made this possible!</p><p>Introducing <a href="https://github.com/snugug/gulp-css-target">gulp-css-target</a>, a Gulp plugin for post-processing a CSS file into its target parts. Usage is fairly simple, and takes two parts. The first part is a special CSS comment to fence in the code you want. The opening fence should be as follows:</p><pre class="language-scss"><code class="language-scss"><span class="token comment">/*! @{target: my-awesome-target} */</span>
</code></pre><p>Then, write any styling you'd like to include under that. The closing fence should look like the following:</p><pre class="language-scss"><code class="language-scss"><span class="token comment">/*! {target: my-awesome-target}@ */</span>
</code></pre><p>You can have multiple of the same targets in the same stylesheet, they'll get added in order. Once you've got those comments in, create a Gulp task and pipe your CSS into <code>target</code> and back out to where you'd like it to go!</p><pre class="language-scss"><code class="language-scss">var gulp = <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var target = <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-css-target'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Same Directory</span>
gulp.<span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'target'</span>, function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  return gulp.<span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'css/**/*.css'</span><span class="token punctuation">)</span>
    .<span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">target</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    .<span class="token function">pipe</span><span class="token punctuation">(</span>gulp.<span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'css/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>This will create a <code>my-awesome-target.css</code> file in your CSS directory, put your targeted styling into that file (without comments), and remove the targeted styling from your source file. Yay!</p><p>Now for some bonus material! <a href="https://github.com/Team-Sass/toolkit">Toolkit 2.4.0</a> includes a <a href="https://github.com/Team-Sass/toolkit#target"><code>@include target</code> mixin</a> to make writing these special comments easy! This mixin requires Sass 3.3.x or greater as it relies upon <code>@at-root</code>. The actual mixin is fairly simple, you can simply include it yourself if you'd like:</p><pre class="language-scss"><code class="language-scss"><span class="token keyword">@mixin</span> <span class="token function">target</span><span class="token punctuation">(</span><span class="token variable">$target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@at-root</span></span> <span class="token punctuation">{</span>
    <span class="token comment">/*! @{target: #{$target}} */</span>
    <span class="token selector"><span class="token parent important">&amp;</span> </span><span class="token punctuation">{</span>
      <span class="token keyword">@content</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>
    <span class="token comment">/*! {target: #{$target}}@ */</span>  
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>While I haven't (and honestly probably won't) write mixins for other preprocessors, it should be do-able with similar features, or just by hand. That makes <code>gulp-css-target</code> usable with any preprocessor, including not using one at all.</p><p>Enjoy everyone!</p></div><footer class="article--author"><span class="article--published" itemprop="datePublished">Published on <time datetime="2018-07-29">June 15th, 2014</time></span></footer></article></main><footer class="_blog--footer"><div class="footer"><ul class="footer--links"><li class="footer--link-item"><a href="/" class="footer--link">Home</a></li><li class="footer--link-item"><a href="/me/" class="footer--link">Me</a></li><li class="footer--link-item"><a href="/presentations/" class="footer--link">Presentations</a></li><li class="footer--link-item"><a href="/musings/" class="footer--link">Musings</a></li></ul></div></footer></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-30577396-1', 'auto');
    ga('send', 'pageview');</script></body></html>