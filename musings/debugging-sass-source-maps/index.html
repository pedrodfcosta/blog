<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Debugging Sass with Source Maps | Snugug</title><link rel="icon" href="/images/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="google-site-verification" content="zIeV2B7zZKCtEFP-6vV8rKk0ocpbp035v_g3IRn12Jo"><script src="/js/main.js" defer="defer"></script><style type="text/css">article,body,div,h1,header,html,main{background:0 0;border:0;font-size:100%;margin:0;outline:0;padding:0;vertical-align:baseline}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{line-height:1}article,header,main{display:block}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}:root{font-size:125%;font-family:aller,'Lucida Grande','Lucida Sans Unicode','Lucida Sans',Geneva,Verdana,sans-serif}body{background:#f8f7f2;color:#2c2a21;text-rendering:optimizeLegibility;-webkit-font-feature-settings:"liga","dlig";-ms-font-feature-settings:"liga","dlig";-o-font-feature-settings:"liga","dlig";font-feature-settings:"liga","dlig";font-weight:400}body *+*{margin-top:1rem}.article--heading{width:100vw;padding:2rem;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;z-index:-1}.article--heading{background-color:#c20030;background:linear-gradient(0deg,rgba(194,0,48,0) 10%,rgba(194,0,48,.05) 10%,rgba(194,0,48,.05) 20%,rgba(194,0,48,.1) 20%,rgba(194,0,48,.1) 30%,rgba(194,0,48,.15) 30%,rgba(194,0,48,.15) 40%,rgba(194,0,48,.2) 40%,rgba(194,0,48,.2) 50%,rgba(194,0,48,.3) 50%,rgba(194,0,48,.3) 60%,rgba(194,0,48,.4) 60%,rgba(194,0,48,.4) 70%,rgba(194,0,48,.5) 70%,rgba(194,0,48,.5) 80%,rgba(194,0,48,.6) 80%,rgba(194,0,48,.6) 90%,rgba(194,0,48,.8) 90%),linear-gradient(-90deg,rgba(194,0,48,0) 10%,rgba(194,0,48,.05) 10%,rgba(194,0,48,.05) 20%,rgba(194,0,48,.1) 20%,rgba(194,0,48,.1) 30%,rgba(194,0,48,.15) 30%,rgba(194,0,48,.15) 40%,rgba(194,0,48,.2) 40%,rgba(194,0,48,.2) 50%,rgba(194,0,48,.3) 50%,rgba(194,0,48,.3) 60%,rgba(194,0,48,.4) 60%,rgba(194,0,48,.4) 70%,rgba(194,0,48,.5) 70%,rgba(194,0,48,.5) 80%,rgba(194,0,48,.6) 80%,rgba(194,0,48,.6) 90%,rgba(194,0,48,.8) 90%),#da9400;min-height:100vh}.article--title{text-shadow:0 -.005em #111,-.005em 0 #282727,-.005em -.01em #111,-.01em -.005em #282727,-.01em -.015em #111,-.015em -.01em #282727,-.015em -.02em #111,-.02em -.015em #282727,-.02em -.025em #111,-.025em -.02em #282727,-.025em -.03em #111,-.03em -.025em #282727,-.03em -.035em #111,-.035em -.03em #282727,-.035em -.04em #111,-.04em -.035em #282727,-.04em -.045em #111,-.045em -.04em #282727,-.045em -.05em #111,-.05em -.045em #282727,-.05em -.055em #111,-.055em -.05em #282727,-.055em -.06em #111,-.06em -.055em #282727,-.06em -.065em #111,-.065em -.06em #282727,-.065em -.07em #111,-.07em -.065em #282727,-.07em -.075em #111,-.075em -.07em #282727;-webkit-font-feature-settings:"liga","dlig";-ms-font-feature-settings:"liga","dlig";-o-font-feature-settings:"liga","dlig";font-feature-settings:"liga","dlig";color:#f8f7f2;font-size:2rem;font-weight:700;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;line-height:1.2;margin-right:0;margin:0 auto;max-width:100%;text-align:right;text-rendering:optimizeLegibility;word-wrap:break-word}@media (min-width:860px){.article--title{font-size:6vw;margin-right:calc(10% - 2rem);max-width:80%}}._blog{margin-top:0}@supports (display:flex){._blog{display:-ms-flexbox;display:flex;min-height:100vh;-ms-flex-direction:column;flex-direction:column}}@supports (display:flex){._blog--article{-ms-flex:1;flex:1}}</style><link rel="preload" href="/css/style.css" as="style" onload="this.rel='stylesheet'"><noscript><link rel="stylesheet" href="/css/style.css"></noscript><script>!function(u){"use strict";var e=function(e,t,n){var r,o=u.document,a=o.createElement("link");if(t)r=t;else{var l=(o.body||o.getElementsByTagName("head")[0]).childNodes;r=l[l.length-1]}var i=o.styleSheets;a.rel="stylesheet",a.href=e,a.media="only x",function e(t){if(o.body)return t();setTimeout(function(){e(t)})}(function(){r.parentNode.insertBefore(a,t?r:r.nextSibling)});var d=function(e){for(var t=a.href,n=i.length;n--;)if(i[n].href===t)return e();setTimeout(function(){d(e)})};function s(){a.addEventListener&&a.removeEventListener("load",s),a.media=n||"all"}return a.addEventListener&&a.addEventListener("load",s),(a.onloadcssdefined=d)(s),a};"undefined"!=typeof exports?exports.loadCSS=e:u.loadCSS=e}("undefined"!=typeof global?global:this),function(r){if(r.loadCSS){var e=loadCSS.relpreload={};if(e.support=function(){try{return r.document.createElement("link").relList.supports("preload")}catch(e){return!1}},e.poly=function(){for(var e=r.document.getElementsByTagName("link"),t=0;t<e.length;t++){var n=e[t];"preload"===n.rel&&"style"===n.getAttribute("as")&&(r.loadCSS(n.href,n,n.getAttribute("media")),n.rel=null)}},!e.support()){e.poly();var t=r.setInterval(e.poly,300);r.addEventListener&&r.addEventListener("load",function(){e.poly(),r.clearInterval(t)}),r.attachEvent&&r.attachEvent("onload",function(){r.clearInterval(t)})}}}(this);</script><script id="font-load">(function () {
      'use strict';

      var fontURL = '/css/fonts.css?bust=342918',
          fonts,
          req,
          style,
          fontUrlLS;

      window.domCL = false;

      window.addEventListener('DOMContentLoaded', function () {
        window.domCL = true;
      });

      if (window.localStorage && document.querySelector && window.XMLHttpRequest) {
        fonts = localStorage.getItem('fonts');
        fontUrlLS = localStorage.getItem('fontURL');

        if (fonts && fontUrlLS === fontURL) {
          req = document.querySelector('#font-load');

          style = window.document.createElement('style');
          style.innerHTML = fonts;

          req.parentNode.insertBefore(style, req.nextSibling);
        }
        else {
          window.addEventListener('load', function () {
            req = new XMLHttpRequest();
            req.open('GET', fontURL);
            req.onreadystatechange = function () {
              localStorage.setItem('fonts', req.responseText);
              localStorage.setItem('fontURL', fontURL);
            }
            req.send();
          });
        }
      }
    })();</script></head><body><div class="_blog"><main class="_blog--article" itemscope="" itemtype="http://schema.org/Blog"><article class="article"><header class="article--heading"><h1 class="article--title" itemprop="name">Debugging Sass with Source Maps</h1></header><div class="article--content base" itemprop="text"><h2>UPDATE 07/06/2013</h2><p><strong><em>After some user confusion about the difference between Source Maps and Debug Info, this article has been updated to more clearly focus on Source Maps. This update incorporates the previous update in which Paul Irish pointed out that the UI for individual properties have been added to Canary's Source Map implementation.</em></strong></p><p>One of the super exciting features in Sass 3.3, currently in development, is the introduction of native <a href="http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/">Source Maps</a> in Sass. Source Maps are a generic mapping format written in JSON that can be utilized by any processed file to create relations between pre-processed files and post-processed files, for instance between pre-compressed JavaScript and the expanded development files or, as in our case, between compiled CSS and the development Sass files. If you've ever used <a href="https://addons.mozilla.org/en-us/firefox/addon/firesass-for-firebug/">FireSass</a> or Sass's <code>--debug-info</code> flag, you can think of Source Maps as their successor.</p><h2>Before We Start</h2><p>Google Chrome <a href="https://www.google.com/intl/en/chrome/browser/canary.html">Canary</a> currently has support for Sass Source Maps built in, so I will be referencing their implementation of debugging for the purposes of this post. There are other tools that are able to do what Chrome does, but Chrome provides a good good baseline for comparison. To enable Source Maps in Chrome, go to <a href="chrome://flags">chrome://flags</a> inside of your Canary browser and enable <code>Enable Developer Tools experiments.</code>. You'll need to restart your browser afterwards. Once enabled, open up your Web Inspector, open up settings (the gear in the lower-right corner), go to <code>Experiments</code>, check <code>Support for Sass</code>, and restart your browser to have the changes take effect.</p><h2>Sass Source Maps</h2><p>Source Maps change the Sass debugging game. Now, in order to test Sass Source Maps, your'e going to need the prerelease version of Sass 3.3 which you can install by running <code>gem install sass --pre</code>. You're going to need at least <strong>Sass 3.3.0.alpha.101</strong> for Source Maps to work. If you're compiling using Sass, you can compile your files with Source Maps by doing something like <code>sass --watch --sourcemap style.scss:style.css</code>; as of this writing, adding <code>sass_options = {:sourcemap =&gt; true}</code> into Compass's config.rb unfortunately <a href="https://github.com/chriseppstein/compass/issues/1189">does not work</a>, but it hopefully will soon. With Source Maps enabled, in addition to your compiled file, you get a file in the same directory called <code>file.css.map</code> which looks something like this:</p><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
<span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
<span class="token string">"mappings"</span><span class="token punctuation">:</span> <span class="token string">"AAOA,IAAK;EACH,MAAM,EAAE,IAAI;EACZ,KAAK,EAAE,IAAI;ECRX,gBAAgB,EAAE,IAAI;EDUtB,OAAO,EAAE,IAAI"</span><span class="token punctuation">,</span>
<span class="token string">"sources"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"../sass/test.scss"</span><span class="token punctuation">,</span><span class="token string">"../sass/_mixin.scss"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token string">"file"</span><span class="token punctuation">:</span> <span class="token string">"test.css"</span>
<span class="token punctuation">}</span>
</code></pre><p>Look! A pretty JSON file! It's fairly human-readable except for the actual mappings which are encoded to make their size smaller. It also shows us all of the sources that make up that file, providing us a good way to see what actually is going into our files.</p><p>If you go to Sources in Canary, you'll be in for a wonderful surprise: each partial that is used to generate your final CSS file gets displayed! That means you can easily see your whole development partial structure!</p><p>On top of all of that, the Source Map not only maps selectors to their source, it also maps <em>individual properties</em> to their source! Simply <code>ctrl+click</code> (Windows) or <code>cmd-click</code> (Mac) to go straight to the line in the file a property comes from! As promised, Sass Source Maps allow you to dive in to a property that comes from mixins, jumping straight to the line in the file inside the mixin it comes from, as well as dive in to a property that comes from extendables, jumping straight to the line in the file inside the extendable it comes from and even working with placeholder extendables. If there was one disappointment, it's that, while the Source Maps will take you to a property that's built using a function and it will show you the function call, if the function is supplied by a partial, that partial isn't included in the Source Map tree and there's still no easy way to jump to the actual function definition. That being said, I'm not sure how I would effectively go about implementing that, so I can't be too upset about that.</p><p>Anyway, all in all, this is absolutely amazing, and I'm super excited to have this available to us in Sass. Huge thanks to Alexander Pavlov for the patch to put this into Chrome and I believe who wrote the Source Map patch for Sass to begin with.</p><h2>Sass Debug Info</h2><p>If you have previously used FireSass or or Sass's <code>--debug-info</code>, you were using an ad-hoc hack to determine the source of selectors, but <code>--debug-info</code> <em>is not</em> a true Source Map. The new Source Map feature above is the first real implementation of Source Maps in Sass. If you are unable to use Sass 3.3's Source Map feature, you can still debug Sass currently with Debug Info.</p><p>Currently available in the stable version of Sass, as of this writing it's Sass 3.2.6, is the <code>--debug-info</code> flag. With this flag enabled, Sass will print out a non-standard media query that tools can read and determine the source file from. If you're compiling using Sass, you can compile your files with the debug info by doing something like <code>sass --watch --debug-info style.scss:style.css</code>; if you're compiling using Compass, you can add <code>sass_options = {:debug_info =&gt; true}</code> to the bottom of your <code>config.rb</code> file. With Debug Info on, above each selector in your compiled CSS file, a non-standard media query will be printed that looks something like this:</p><pre class="language-scss"><code class="language-scss"><span class="token comment">/* Compressed (what you'll see) */</span>
<span class="token comment">/* @media -sass-debug-info{filename{font-family:file\:\/\/\/Users\/Richard\/Prototypes\/sourcemap\/sass\/test\.scss}line{font-family:\000034}} */</span>

<span class="token comment">/* Expanded */</span>
@<span class="token selector">media -sass-debug-info</span><span class="token punctuation">{</span>
  <span class="token selector">filename</span><span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span>file\<span class="token punctuation">:</span>\/\/\/Users\/Richard\/Prototypes\/sourcemap\/sass\/test\.scss
  <span class="token punctuation">}</span>
  <span class="token selector">line</span><span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span>\000034
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Debug Info, instead of producing a Source Map, will produce a non-standard media query <code>-sass-debug-info</code> with two fake selectors; <code>filename</code> and <code>line</code>. The <code>filename</code> selector has the absolute path to the file, whereas the <code>line</code> selector has the line number the selector comes from (although this is a bit of misdirection as the line is actually 4, not 34). Debug Info isn't as powerful as Source Maps, being unable to dig into individual properties or pulling in all of the partials you're using. Google Chrome stable supports Debug Info, enabled the same way you enable Source Maps in Chrome Canary. When enabled, Sass's Debug Info will replace your normal properties with Debug Info properties just like with Source Maps, although in Sources, you will only see the primary Sass file, not any of the partials.</p></div><footer class="article--author"><span class="article--published" itemprop="datePublished">Published on <time datetime="2018-07-29">February 28th, 2013</time></span></footer></article></main><footer class="_blog--footer"><div class="footer"><ul class="footer--links"><li class="footer--link-item"><a href="/" class="footer--link">Home</a></li><li class="footer--link-item"><a href="/me/" class="footer--link">Me</a></li><li class="footer--link-item"><a href="/presentations/" class="footer--link">Presentations</a></li><li class="footer--link-item"><a href="/musings/" class="footer--link">Musings</a></li></ul></div></footer></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-30577396-1', 'auto');
    ga('send', 'pageview');</script></body></html>